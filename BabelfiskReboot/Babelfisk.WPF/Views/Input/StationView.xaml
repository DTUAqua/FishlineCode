<UserControl x:Class="Babelfisk.WPF.Views.Input.StationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:aCtrls="clr-namespace:Anchor.Core.Controls;assembly=Anchor.Core.Controls"
             xmlns:ent="clr-namespace:Babelfisk.Entities.Sprattus;assembly=Babelfisk.Entities"
             xmlns:ancBe="clr-namespace:Anchor.Core.Controls.Behaviors;assembly=Anchor.Core.Controls"
             xmlns:aRules="clr-namespace:Anchor.Core.ValidationRules;assembly=Anchor.Core"
             xmlns:wpfExt="http://schemas.xceed.com/wpf/xaml/toolkit" 
             xmlns:map="clr-namespace:Babelfisk.WPF.Views.Map"
             xmlns:cnv="clr-namespace:Babelfisk.WPF.Converters"
             xmlns:set="clr-namespace:Babelfisk.BusinessLogic.Settings;assembly=Babelfisk.BusinessLogic"
             xmlns:ancSl="clr-namespace:Anchor.Core.Controls.Sliders;assembly=Anchor.Core.Controls"
             xmlns:inp="clr-namespace:Babelfisk.WPF.Views"
             mc:Ignorable="d" >
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Resources/Styles/InputStyles.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/Resources/Styles/GreenRedCheckBoxStyle.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/Resources/Styles/HeaderButtons.xaml"/>

                <ResourceDictionary>
                    <cnv:StringShowOnContainsToVisibilityConverter x:Key="cStringShowOnContains" />
                    <cnv:StringHideOnContainsToVisibilityConverter x:Key="cStringHideOnContains" />
                    <cnv:StringContainsToBoolConverter x:Key="cStringContains" />
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>

    </UserControl.Resources>
    <Grid Background="White" KeyboardNavigation.TabNavigation="Cycle" IsEnabled="{Binding Path=IsLoading, Converter={StaticResource ResourceKey=cBoolToBoolNegation}}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0">
            <Border BorderBrush="LightGray" BorderThickness="0,0,0,1" TextBlock.Foreground="{StaticResource InputHeaderForeground}" Background="{StaticResource InputHeaderBackground}" SnapsToDevicePixels="True">
                <Grid DockPanel.Dock="Bottom" Margin="10,10,10,10" IsEnabled="{Binding Path=IsLoading, Converter={StaticResource ResourceKey=cBoolToBoolNegation}}">

                    <DockPanel VerticalAlignment="Center" HorizontalAlignment="Left">
                        <TextBlock Text="Station" DockPanel.Dock="Left" VerticalAlignment="Center" FontSize="26" />
                    </DockPanel>

                    <!-- Right header -->
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Right" Orientation="Horizontal">
                        <TextBlock DockPanel.Dock="Left" VerticalAlignment="Center" FontSize="18" Margin="0,0,5,0" >
                            <TextBlock.Style>
                                <Style TargetType="{x:Type TextBlock}">
                                    <Setter Property="Text" Value="" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=TripType}" Value="SØS">
                                            <Setter Property="Text" Value="SØS" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Path=TripType}" Value="VID">
                                            <Setter Property="Text" Value="VID" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Path=TripType}" Value="REKHVN">
                                            <Setter Property="Text" Value="REKHVN" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Path=TripType}" Value="REKOMR">
                                            <Setter Property="Text" Value="REKOMR" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Path=TripType}" Value="REKTBD">
                                            <Setter Property="Text" Value="REKTBD" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <Image Height="35" Width="35" Margin="0,3,0,0" Source="pack://application:,,,/Resources/Images/Treeview/sample.png" ></Image>
                    </StackPanel>

                    <!-- Header buttons -->
                    <DockPanel HorizontalAlignment="Center"
                               Visibility="{Binding Path=IsLoading, Converter={StaticResource ResourceKey=cBoolToVisibility}, ConverterParameter=False}"
                               >

                        <aCtrls:HeaderButton  DockPanel.Dock="Right" ToolTip="Klik for at gå til turen" HorizontalAlignment="Right" 
                                              Command="{Binding Path=ShowTripCommand}" Style="{StaticResource ResourceKey=headerInfoButton}" >
                            <aCtrls:HeaderButton.Header>
                                <Image Height="22" Margin="0,0,0,0" >
                                    <Image.Style>
                                        <Style TargetType="{x:Type Image}">
                                            <Setter Property="Source" Value="pack://application:,,,/Resources/Images/Treeview/søs.png" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=TripType}" Value="VID">
                                                    <Setter Property="Source" Value="pack://application:,,,/Resources/Images/Treeview/vid.png" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=TripType}" Value="REKHVN">
                                                    <Setter Property="Source" Value="pack://application:,,,/Resources/Images/Treeview/HookHarbour.ico" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=TripType}" Value="REKTBD">
                                                    <Setter Property="Source" Value="pack://application:,,,/Resources/Images/Treeview/HookVessel.ico" />
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=TripType}" Value="REKOMR">
                                                    <Setter Property="Source" Value="pack://application:,,,/Resources/Images/Treeview/HookArea.ico" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </aCtrls:HeaderButton.Header>
                            <aCtrls:HeaderButton.Content>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="6">
                                    <TextBlock Text="{Binding Path=TripNumber}" />
                                </StackPanel>
                            </aCtrls:HeaderButton.Content>
                        </aCtrls:HeaderButton>

                        <Image DockPanel.Dock="Right" Source="pack://application:,,,/Resources/Images/Common/ArrowRight.ico" Margin="5,0,5,0"  Width="20" />


                        <aCtrls:HeaderButton DockPanel.Dock="Right" HorizontalAlignment="Right" ToolTip="Klik for at gå til togtet"
                                              Command="{Binding Path=ShowCruiseCommand}" Style="{StaticResource ResourceKey=headerInfoButton}" >
                            <aCtrls:HeaderButton.Header>
                                <Image Source="pack://application:,,,/Resources/Images/Treeview/vessel.ico" Opacity="0.7" Height="20" Margin="0,0,0,0" />
                            </aCtrls:HeaderButton.Header>
                            <aCtrls:HeaderButton.Content>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="6">
                                    <TextBlock Text="{Binding Path=CruiseTitle}" />
                                </StackPanel>
                            </aCtrls:HeaderButton.Content>
                        </aCtrls:HeaderButton>

                        <Image DockPanel.Dock="Right" Source="pack://application:,,,/Resources/Images/Common/ArrowRight.ico" Margin="5,0,5,0"  Width="20" />

                        <aCtrls:HeaderButton  DockPanel.Dock="Right" ToolTip="År" Tag="Disabled" HorizontalAlignment="Right" 
                                              KeyboardNavigation.IsTabStop="False"
                                              Style="{StaticResource ResourceKey=headerInfoButton}" >
                            <aCtrls:HeaderButton.Header>
                                <Image Source="pack://application:,,,/Resources/Images/Treeview/Year4.ico" Height="18" Margin="0,0,0,0" />
                            </aCtrls:HeaderButton.Header>
                            <aCtrls:HeaderButton.Content>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="6">
                                    <TextBlock Text="{Binding Path=CruiseYear}" />
                                </StackPanel>
                            </aCtrls:HeaderButton.Content>
                        </aCtrls:HeaderButton>
                        
                        

                    </DockPanel>

                </Grid>
            </Border>
        </Grid>

        <aCtrls:ScrollViewerStaticContent x:Name="scrollviewer" Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

            <!--<Viewbox Grid.Column="1" Stretch="Uniform" StretchDirection="DownOnly" HorizontalAlignment="Center" VerticalAlignment="Center"  Margin="10,0,10,0" >-->
            <DockPanel Margin="10" Width="800" HorizontalAlignment="Center" >
                <DockPanel.LayoutTransform>
                    <TransformGroup>
                        <ScaleTransform ScaleY="{Binding Source={x:Static set:Settings.Instance}, Path=ZoomLevelStation, Converter={StaticResource ResourceKey=cDivideBy}, ConverterParameter=100}" 
                                        ScaleX="{Binding Source={x:Static set:Settings.Instance}, Path=ZoomLevelStation, Converter={StaticResource ResourceKey=cDivideBy}, ConverterParameter=100}"/>
                    </TransformGroup>
                </DockPanel.LayoutTransform>

                <!-- Station details -->
                <DockPanel Style="{StaticResource ResourceKey=dpSection}" >
                    <DockPanel DockPanel.Dock="Top">
                        <TextBlock DockPanel.Dock="left" Style="{StaticResource txtSectionHeader}" Text="Station"/>
                        <Separator Height="10" DockPanel.Dock="Top" Margin="6,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    </DockPanel>

                    <StackPanel Style="{StaticResource ResourceKey=spSection}">
                        <UniformGrid Rows="1" Columns="2" Visibility="{Binding Path=IsRecreationalFishery, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >
                            <DockPanel Margin="0" >
                                <!-- Trip number -->
                                <Label DockPanel.Dock="Left" >
                                    <Label.Style>
                                        <Style TargetType="{x:Type Label}" BasedOn="{StaticResource ResourceKey=txtHeader}">
                                            <Setter Property="Content" Value="Survey gizmo id" />
                                        </Style>
                                    </Label.Style>
                                </Label>

                                <Grid>
                                    <TextBox x:Name="tbSGId" DockPanel.Dock="Left" KeyboardNavigation.TabIndex="1"  ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=SGId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}" 
                                     ancBe:SetControlFocus.SetFocus="{Binding Path=IsSGIdFocused, Mode=TwoWay}"        
                                     />

                                    <TextBlock Style="{StaticResource txtMandatoryField}" HorizontalAlignment="Right"  />
                                </Grid>

                            </DockPanel>
                            
                            <DockPanel Margin="0" >
                                <!-- Trip number -->
                                <Label DockPanel.Dock="Left" >
                                    <Label.Style>
                                        <Style TargetType="{x:Type Label}" BasedOn="{StaticResource ResourceKey=txtHeader}">
                                            <Setter Property="Content" Value="Respondent nr." />
                                        </Style>
                                    </Label.Style>
                                </Label>

                                <Grid>
                                    <TextBox x:Name="tbRepNumber" DockPanel.Dock="Left" KeyboardNavigation.TabIndex="1"  ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=StationNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}" 
                                     ancBe:SetControlFocus.SetFocus="{Binding Path=IsStationNumberFocused, Mode=TwoWay}"        
                                     />

                                    <TextBlock Style="{StaticResource txtMandatoryField}" HorizontalAlignment="Right"  />
                                </Grid>

                            </DockPanel>
                        </UniformGrid>

                        <UniformGrid Rows="1" Columns="2" Visibility="{Binding Path=IsRecreationalFishery, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}" >
                            <DockPanel Margin="0" >
                                <!-- Trip number -->
                                <Label DockPanel.Dock="Left" >
                                    <Label.Style>
                                        <Style TargetType="{x:Type Label}" BasedOn="{StaticResource ResourceKey=txtHeader}">
                                            <Setter Property="Content" Value="Stations nr." />
                                        </Style>
                                    </Label.Style>
                                </Label>

                                <Grid>
                                    <TextBox x:Name="tbStationNumber" DockPanel.Dock="Left" KeyboardNavigation.TabIndex="1"  ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=StationNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}" 
                                     ancBe:SetControlFocus.SetFocus="{Binding Path=IsStationNumberFocused, Mode=TwoWay}"        
                                     />

                                    <TextBlock Style="{StaticResource txtMandatoryField}" HorizontalAlignment="Right"  />
                                </Grid>

                            </DockPanel>

                            <DockPanel Margin="0" >
                                <!-- Lab Journal number -->
                                <Label Content="Laboratorium journal nr." DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbLabJournalNumber" KeyboardNavigation.TabIndex="2" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=LabJournalNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>
                        </UniformGrid>

                        <UniformGrid Columns="2">
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >
                                <!-- stationairy station -->
                                <Label Content="Fast station" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox KeyboardNavigation.TabIndex="3" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=StationName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <DockPanel Margin="0" >
                                <!-- Gear group -->
                                <Label Content="Redskabsgruppe" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <Button DockPanel.Dock="Right" Visibility="Collapsed" 
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_SampleType"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér redskabsgrupper"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <Grid>
                                        <aCtrls:FilteredComboBox x:Name="cbbSampleType" KeyboardNavigation.TabIndex="4" SelectionChanged="SampleType_SelectionChanged"
                                                         ItemsSource="{Binding Path=SampleTypes}" FilterFromStart="True"
                                                         SelectedItem="{Binding Path=SelectedSampleType, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>

                                        <Border Margin="0,0,0,0">
                                            <TextBlock Style="{StaticResource txtMandatoryField}" HorizontalAlignment="Right"  />
                                        </Border>

                                    </Grid>


                                </DockPanel>
                            </DockPanel>


                            <DockPanel Margin="0" Visibility="{Binding Path=IsRecreationalFishery, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}"  >
                                <!-- Gear quality -->
                                <Label Content="Redskabskvalitet" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <TextBlock Style="{StaticResource txtRecommendedField}" Margin="2,5,-10,0" DockPanel.Dock="Right" />
                                    
                                    <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_GearQuality"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér redskabskvaliteter"
                                        KeyboardNavigation.IsTabStop="False" >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                   

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="5" FilterFromStart="False"
                                                         ItemsSource="{Binding Path=GearQualities}" 
                                                         SelectedItem="{Binding Path=SelectedGearQuality, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>


                                </DockPanel>

                            </DockPanel>

                            <!-- Primary species -->
                            <DockPanel Margin="0" >
                                <DockPanel.Style>
                                    <Style TargetType="{x:Type DockPanel}">
                                        <Setter Property="Visibility" Value="Collapsed" />

                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding Path=IsScientific}" Value="False" />
                                                    <Condition Binding="{Binding Path=IsRecreationalFishery}" Value="False"  />
                                                </MultiDataTrigger.Conditions>

                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <!-- Gear group -->
                                <Label Content="Primær målart" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel>
                                    <Button DockPanel.Dock="Right" 
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_Species"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér arter"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="6" FilterFromStart="True"
                                                         ItemsSource="{Binding Path=TargetSpecies}" 
                                                         SelectedItem="{Binding Path=SelectedTargetSpecies, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>


                                </DockPanel>
                            </DockPanel>

                            <!-- Haul type (VID) -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >
                                <!-- Gear group -->
                                <Label Content="Træktype" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel>
                                    <Button DockPanel.Dock="Right" 
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_HaulType"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér træktyper"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="7" FilterFromStart="False" 
                                                         ItemsSource="{Binding Path=HaulTypes}" 
                                                         SelectedItem="{Binding Path=SelectedHaulType, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>


                                </DockPanel>
                            </DockPanel>

                            <!-- CTD Station (VID) -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >

                                <Label Content="CTD station" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox KeyboardNavigation.TabIndex="8" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=HydroStation, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <!-- Show/Hide CTD Information (VID) -->
                            <DockPanel Margin="0,0,0,0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >
                                <Label Content="Vis CTD oplysninger" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <CheckBox Style="{StaticResource ResourceKey=sCheckBox2}" KeyboardNavigation.TabIndex="9" DockPanel.Dock="Left" IsThreeState="False" 
                                      IsChecked="{Binding Path=IsCTDInfoVisible, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" Margin="0" />

                                <TextBlock DockPanel.Dock="Left" VerticalAlignment="Center" Foreground="Gray" Margin="0,0,0,2" >
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Text" Value="(nej)" />
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=IsCTDInfoVisible}" Value="True" >
                                                    <Setter Property="Text" Value="(ja)" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>

                                <StackPanel/>
                            </DockPanel>


                        </UniformGrid>

                    </StackPanel>
                </DockPanel>


                <!-- Time and place details -->
                <DockPanel Style="{StaticResource ResourceKey=dpSection}" x:Name="dpTimeAndPlace" >
                    <DockPanel DockPanel.Dock="Top">
                        <TextBlock DockPanel.Dock="left" Style="{StaticResource txtSectionHeader}" Text="Tid og sted"/>
                        <Separator Height="10" DockPanel.Dock="Top" Margin="6,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    </DockPanel>

                    <StackPanel Style="{StaticResource ResourceKey=spSection}">

                        <UniformGrid Rows="1" Columns="2">

                            <!-- Timezone -->
                            <DockPanel Margin="0" >

                                <Label Content="Tidszone ved redskab sat" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <Button DockPanel.Dock="Right" 
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_TimeZone"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér tidszoner"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="10"
                                                         ItemsSource="{Binding Path=TimeZones}" 
                                                         SelectedItem="{Binding Path=SelectedTimeZone, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>
                                </DockPanel>

                            </DockPanel>

                            <!-- Fishing time -->
                            <DockPanel Margin="0" >

                                <Label Content="Fisketid (mm:ss)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox KeyboardNavigation.IsTabStop="False" ancBe:SelectTextOnFocus.Active="True" IsReadOnly="True" Background="#FFF1F1F1"
                                         Text="{Binding Path=FishingTime, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                         Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>
                        </UniformGrid>

                        <UniformGrid Rows="1" Columns="2">

                            <!-- Gear out -->
                            <DockPanel Margin="0" ToolTip="Angiv venligst tid i valgte tidszone ovenfor." >
                                <Label DockPanel.Dock="Left" >
                                    <Label.Style>
                                        <Style TargetType="{x:Type Label}" BasedOn="{StaticResource ResourceKey=txtHeader}">
                                            <Setter Property="Content" Value="Redskab sat" />

                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=IsRecreationalFishery}" Value="True">
                                                    <Setter Property="Content" Value="Redskab sat" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Label.Style>
                                </Label>

                                <Grid>
                                    <!-- Sea form should not include seconds  -->
                                    <aCtrls:DateTimePickerControl Value="{Binding Path=GearStartDateTime, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                                                                  Style="{StaticResource baseInputBoxStyle}" Format="dd-MM-yyyy HH:mm"
                                                                       Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}"
                                                                  KeyboardNavigation.TabIndex="11" Padding="0,0,0,0"
                                                                  ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre end " ErrorOverstrike="Værdier kan overskrives, ikke slettes"
                                                                  InputStyle="{StaticResource txtValueNoMargin}" />

                                    <!-- Vid form should include seconds -->
                                    <aCtrls:DateTimePickerControl Value="{Binding Path=GearStartDateTime, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                                                                  Style="{StaticResource baseInputBoxStyle}" Format="dd-MM-yyyy HH:mm:ss"
                                                                       Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"
                                                                  KeyboardNavigation.TabIndex="11" Padding="0,0,0,0"
                                                                  ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre end " ErrorOverstrike="Værdier kan overskrives, ikke slettes"
                                                                  InputStyle="{StaticResource txtValueNoMargin}" />

                                    <Border Margin="0,0,0,0">
                                        <TextBlock Style="{StaticResource txtMandatoryField}" HorizontalAlignment="Right"  />
                                    </Border>
                                </Grid>
                            </DockPanel>

                            <!-- Gear in -->
                            <DockPanel Margin="0" ToolTip="Angiv venligst tid i valgte tidszone ovenfor.">

                                <Label DockPanel.Dock="Left"  >
                                    <Label.Style>
                                        <Style TargetType="{x:Type Label}" BasedOn="{StaticResource ResourceKey=txtHeader}">
                                            <Setter Property="Content" Value="Redskab bjærget" />

                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=IsRecreationalFishery}" Value="True">
                                                    <Setter Property="Content" Value="Redskab bjærget" />
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Label.Style>
                                </Label>

                                <Grid x:Name="grdGearIn">
                                    <!-- Sea form should not include seconds  -->
                                    <aCtrls:DateTimePickerControl Value="{Binding Path=GearEndDateTime, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                                                      Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}"
                                                                  KeyboardNavigation.TabIndex="12" Padding="0,0,0,0"
                                                                  Style="{StaticResource baseInputBoxStyle}" Format="dd-MM-yyyy HH:mm"
                                                                  ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre end " ErrorOverstrike="Værdier kan overskrives, ikke slettes"
                                                                  InputStyle="{StaticResource txtValueNoMargin}" />

                                    <!-- Vid form should include seconds -->
                                    <aCtrls:DateTimePickerControl Value="{Binding Path=GearEndDateTime, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                                                      Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"
                                                                  KeyboardNavigation.TabIndex="12" Padding="0,0,0,0"
                                                                  Style="{StaticResource baseInputBoxStyle}" Format="dd-MM-yyyy HH:mm:ss"
                                                                  ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre end " ErrorOverstrike="Værdier kan overskrives, ikke slettes"
                                                                  InputStyle="{StaticResource txtValueNoMargin}" />

                                    <Border Margin="0,0,0,0" Height="36" VerticalAlignment="Bottom">
                                        <TextBlock Style="{StaticResource txtMandatoryField}" HorizontalAlignment="Right"  />
                                    </Border>
                                </Grid>
                            </DockPanel>
                        </UniformGrid>

                        <UniformGrid Rows="1" Columns="2">
                            <!-- Weekday or weekend -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsRecreationalFishery, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >
                                <!-- Gear group -->
                                <Label Content="Hverdag/Weekend" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel>

                                    <aCtrls:FilteredComboBox FilterFromStart="False" KeyboardNavigation.TabIndex="12"  
                                                         ItemsSource="{Binding Path=WeekdayWeekendList}" 
                                                         SelectedItem="{Binding Path=WeekdayWeekend, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>
                                </DockPanel>
                            </DockPanel>
                        </UniformGrid>

                        <!-- Coordinates not known information -->
                        <DockPanel Margin="0,0,0,0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}" >
                            <Label Content="Koordinater ikke kendt" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}"
                                   />

                            <CheckBox Style="{StaticResource ResourceKey=sCheckBox2}" KeyboardNavigation.TabIndex="13" DockPanel.Dock="Left" IsThreeState="False" 
                                      IsChecked="{Binding Path=IsCoordinatesNotKnown, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Center" Margin="0" />

                            <TextBlock DockPanel.Dock="Left" VerticalAlignment="Center" Foreground="Gray" Margin="0,0,0,2" >
                                <TextBlock.Style>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=IsCoordinatesNotKnown}" Value="True" >
                                                <Setter Property="Text" Value="(ikke kendt)" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>

                            <StackPanel/>
                        </DockPanel>

                        <UniformGrid Rows="1" Columns="2" IsEnabled="{Binding Path=IsCoordinatesNotKnown, Converter={StaticResource ResourceKey=cBoolToBoolNegation}}">
                            <!-- Start latitude -->
                            <DockPanel Margin="0" >
                                <Label Content="Startbreddegrad" DockPanel.Dock="Left" ToolTip="{Binding Path=ToolTip, ElementName=tbStartLatitude}" Style="{StaticResource ResourceKey=txtHeader}" ></Label>

                                <aCtrls:PositionTimeTextBox x:Name="tbStartLatitude" KeyboardNavigation.TabIndex="14" ToolTip="GG°MM.mmmm' N/S"
                                                            InputTemplate="{x:Static aCtrls:PositionTimeTextBox.LatTemplate}"
                                                            ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre eller lig med " ErrorOverstrike="Værdier kan kun overskrives, ikke slettes"
                                                            TextValue="{Binding Path=StartLatitude, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                            Style="{StaticResource ResourceKey=txtValue}"  />

                            </DockPanel>

                            <!-- Start longitude -->
                            <DockPanel Margin="0" >
                                <Label Content="Startlængdegrad" DockPanel.Dock="Left" ToolTip="{Binding Path=ToolTip, ElementName=tbStartLongitude}" Style="{StaticResource ResourceKey=txtHeader}" ></Label>

                                <aCtrls:PositionTimeTextBox x:Name="tbStartLongitude" KeyboardNavigation.TabIndex="15" ToolTip="GGG°MM.mmmm' E/W" 
                                                            InputTemplate="{x:Static aCtrls:PositionTimeTextBox.LonTemplate}"
                                                            ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre eller lig med " ErrorOverstrike="Værdier kan kun overskrives, ikke slettes"
                                                            TextValue="{Binding Path=StartLongitude, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                            Style="{StaticResource ResourceKey=txtValue}"  />
                            </DockPanel>
                        </UniformGrid>

                        <UniformGrid Rows="1" Columns="2" IsEnabled="{Binding Path=IsCoordinatesNotKnown, Converter={StaticResource ResourceKey=cBoolToBoolNegation}}">
                            <!-- Stop latitude -->
                            <DockPanel Margin="0" >
                                <Label Content="Slutbreddegrad" DockPanel.Dock="Left" ToolTip="{Binding Path=ToolTip, ElementName=tbEndLatitude}" Style="{StaticResource ResourceKey=txtHeader}" ></Label>

                                <aCtrls:PositionTimeTextBox x:Name="tbEndLatitude" KeyboardNavigation.TabIndex="16" ToolTip="GG°MM.mmmm' N/S"
                                                            InputTemplate="{x:Static aCtrls:PositionTimeTextBox.LatTemplate}"
                                                            ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre eller lig med " ErrorOverstrike="Værdier kan kun overskrives, ikke slettes"
                                                            TextValue="{Binding Path=EndLatitude, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                            Style="{StaticResource ResourceKey=txtValue}"  />
                            </DockPanel>

                            <!-- Stop longitude -->
                            <DockPanel Margin="0" >
                                <Label Content="Slutlængdegrad" DockPanel.Dock="Left" ToolTip="{Binding Path=ToolTip, ElementName=tbStopLongitude}" Style="{StaticResource ResourceKey=txtHeader}" ></Label>

                                <aCtrls:PositionTimeTextBox x:Name="tbStopLongitude" KeyboardNavigation.TabIndex="17" ToolTip="GGG°MM.mmmm' E/W"
                                                            InputTemplate="{x:Static aCtrls:PositionTimeTextBox.LonTemplate}"
                                                            ErrorInvalidKey="Ugyldig værdi" ErrorLessThan="Værdien skal være mindre eller lig med " ErrorOverstrike="Værdier kan kun overskrives, ikke slettes"
                                                            TextValue="{Binding Path=EndLongitude, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                                            Style="{StaticResource ResourceKey=txtValue}"  />
                            </DockPanel>
                        </UniformGrid>

                        <UniformGrid Rows="1" Columns="2" IsEnabled="{Binding Path=IsCoordinatesNotKnown}">
                            <!-- Farvand -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}" >
                                <Label Content="Farvand" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_DFUArea"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér farvand"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="18" FilterFromStart="True"
                                                         ItemsSource="{Binding Path=Areas}" SelectionChanged="Area_SelectionChanged"
                                                         SelectedItem="{Binding Path=SelectedArea, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>


                                </DockPanel>

                            </DockPanel>
                            
                            

                            <!-- Square -->
                            <DockPanel Margin="0" >
                                <DockPanel.Style>
                                    <Style TargetType="{x:Type DockPanel}">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition Binding="{Binding Path=IsScientific}" Value="False"  />
                                                    <Condition Binding="{Binding Path=IsRecreationalFishery}" Value="False" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label Content="Square" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <DockPanel >
                                        <Button DockPanel.Dock="Right" 
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="ICES_DFU_Relation_FF"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér relationen mellem farvand og statistiske rektangler"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                            <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                        </Button>

                                        <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="19"  FilterFromStart="True"
                                                         ItemsSource="{Binding Path=StatisticalRectangles}" 
                                                         SelectedItem="{Binding Path=SelectedRectangle, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>


                                    </DockPanel>

                                    <Border Background="White" Opacity="0.6"
                                            Visibility="{Binding Path=IsSquareLoading, Converter={StaticResource ResourceKey=cBoolToVisibility}, ConverterParameter=True, FallbackValue=Collapsed}"
                                            >
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="Arbejder..." Margin="10,0,10,0"  />
                                            <ProgressBar IsIndeterminate="True" Width="40" Height="8" VerticalAlignment="Center" />
                                        </StackPanel>

                                    </Border>
                                </Grid>

                            </DockPanel>
                        </UniformGrid>

                    </StackPanel>
                </DockPanel>


                <!-- Sample details -->
                <DockPanel Style="{StaticResource ResourceKey=dpSection}"  Visibility="{Binding Path=IsRecreationalFishery, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}">
                    <DockPanel DockPanel.Dock="Top">
                        <TextBlock DockPanel.Dock="left" Style="{StaticResource txtSectionHeader}" Text="Prøvetagning"/>
                        <Separator Height="10" DockPanel.Dock="Top" Margin="6,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    </DockPanel>

                    <StackPanel Style="{StaticResource ResourceKey=spSection}">
                        <UniformGrid Columns="2">

                            <!-- Sample level -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}">
                                <Label Content="Prøvetagningsniveau" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_CatchRegistration"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér fangst-registreringer"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox x:Name="cbxCatchRegistration" KeyboardNavigation.TabIndex="20"
                                                         ItemsSource="{Binding Path=CatchRegistrations}" FilterFromStart="True"
                                                         SelectedItem="{Binding Path=SelectedCatchRegistration, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>

                                    
                                </DockPanel>

                            </DockPanel>

                            <DockPanel Margin="0" >
                                <!-- Raising of species -->
                                <Label Content="Oparbejdning af arter" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel>
                                    <Button DockPanel.Dock="Right" 
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_SpeciesRegistration"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér arts-registreringer"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox x:Name="cbxSpeciesRegistration" KeyboardNavigation.TabIndex="21" 
                                                         ItemsSource="{Binding Path=SpeciesRegistrations}" FilterFromStart="True"
                                                         SelectedItem="{Binding Path=SelectedSpeciesRegistration, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>


                                </DockPanel>

                            </DockPanel>
                        </UniformGrid>
                    </StackPanel>
                </DockPanel>

                <!-- Wind details -->
                <DockPanel Style="{StaticResource ResourceKey=dpSection}"  Visibility="{Binding Path=IsRecreationalFishery, Converter={StaticResource cBoolToVisibility}, ConverterParameter=False}">
                    <DockPanel DockPanel.Dock="Top">
                        <TextBlock DockPanel.Dock="left">
                            <TextBlock.Style>
                                <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource txtSectionHeader}">
                                    <Setter Property="Text" Value="Vind" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=IsScientific}" Value="True">
                                            <Setter Property="Text" Value="Vind/Hav" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <Separator Height="10" DockPanel.Dock="Top" Margin="6,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    </DockPanel>

                    <StackPanel Style="{StaticResource ResourceKey=spSection}">
                        <UniformGrid Columns="2">
                            <!-- Wind direction -->
                            <DockPanel Margin="0" >
                                <Label Content="Vindretning (°)" ToolTip="Angiv venligst vindretning i grader." DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <TextBox x:Name="tbWindDirection" DockPanel.Dock="Left" KeyboardNavigation.TabIndex="22"  ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=WindDirection, Converter={StaticResource ResourceKey=cStringToShort}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                                    <inp:WarningAsterix HorizontalAlignment="Right" ToolTip="Vindretning skal være mellem 0° og 359°." />
                                </Grid>

                            </DockPanel>

                            <!-- Wind speed -->
                            <DockPanel Margin="0" >
                                <Label Content="Vindhastighed (m/s)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <TextBox x:Name="tbWindSpeed" KeyboardNavigation.TabIndex="23" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=WindSpeed, Converter={StaticResource ResourceKey=cStringToInt}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                                    <inp:WarningAsterix HorizontalAlignment="Right" ToolTip="Vindhastighed skal være mellem 0 og 50 m/s." />
                                </Grid>
                            </DockPanel>

                            <!-- Wave direction -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >
                                <Label Content="Bølgeretning (°)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <TextBox x:Name="tbWaveDirection" KeyboardNavigation.TabIndex="24" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=WaveDirection, Converter={StaticResource ResourceKey=cStringToShort}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                                    <inp:WarningAsterix HorizontalAlignment="Right" ToolTip="Bølgeretning skal være mellem 0° og 359°." />
                                </Grid>
                            </DockPanel>

                            <!-- Wave height -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"  >
                                <Label Content="Bølgehøjdeequiv. (Bf)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbWaveHeight" KeyboardNavigation.TabIndex="25" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=WaveHeight, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Current direction srf -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"  >
                                <Label Content="Strømretning, overfl. (°)" ToolTip="Strømretning, overflade (i grader)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <TextBox x:Name="tbDirectionSrf" KeyboardNavigation.TabIndex="26" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=CurrentDirectionSrf, Converter={StaticResource ResourceKey=cStringToShort}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                                    <inp:WarningAsterix HorizontalAlignment="Right" ToolTip="Strømretning skal være mellem 0° og 359°." />
                                </Grid>
                            </DockPanel>

                            <!-- Current speed srf -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"  >
                                <Label Content="Strømhast. overfl. (m/s)" ToolTip="Strømhastighed, overflade (m/s)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbCurrentSpeedSrf" KeyboardNavigation.TabIndex="27" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=CurrentSpeedSrf, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Current direction bot -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"  >
                                <Label Content="Strømretning, bund (°)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <TextBox x:Name="tbDirectionBot" KeyboardNavigation.TabIndex="28" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=CurrentDirectionBot, Converter={StaticResource ResourceKey=cStringToShort}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                                    <inp:WarningAsterix HorizontalAlignment="Right" ToolTip="Strømretning skal være mellem 0° og 359°." />
                                </Grid>
                            </DockPanel>

                            <!-- Current speed bot -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"  >
                                <Label Content="Strømhast. bund (m/s)" ToolTip="Strømhastighed, bund (m/s)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbCurrentSpeedBot"  KeyboardNavigation.TabIndex="29" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=CurrentSpeedBot, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Bottom type -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}">
                                <Label Content="Bundtype" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_Bottomtype"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér bundtyper"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="30" FilterFromStart="True"
                                                         ItemsSource="{Binding Path=BottomTypes}"
                                                         SelectedItem="{Binding Path=SelectedBottomType, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>


                                </DockPanel>

                            </DockPanel>

                            <!-- Depth avg -->
                            <DockPanel Margin="0" Visibility="{Binding Path=IsScientific, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"  >
                                <Label Content="Dybde, bund (m)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbDepthAvg" KeyboardNavigation.TabIndex="31" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=DepthAvg, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>
                        </UniformGrid>
                    </StackPanel>
                </DockPanel>


                <!-- CTD details -->
                <DockPanel Style="{StaticResource ResourceKey=dpSection}"  Visibility="{Binding Path=IsCTDInfoVisible, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}"  >
                    <DockPanel DockPanel.Dock="Top">
                        <TextBlock DockPanel.Dock="left" Text="CTD Oplysninger" Style="{StaticResource txtSectionHeader}"></TextBlock>
                        <Separator Height="10" DockPanel.Dock="Top" Margin="6,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    </DockPanel>

                    <StackPanel Style="{StaticResource ResourceKey=spSection}">
                        <UniformGrid Columns="2">
                            <!-- Temperature, surface -->
                            <DockPanel Margin="0" >
                                <Label Content="Temperatur, overflade (°)" ToolTip="Temperatur, overflade (i grader)." DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbTemperatureSrf" DockPanel.Dock="Left" KeyboardNavigation.TabIndex="32"  ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=TemperatureSrf, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Temperature, bottom -->
                            <DockPanel Margin="0" >
                                <Label Content="Temperatur, bund (°)" ToolTip="Temperatur, bund (i grader)." DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbTemperatureBot" DockPanel.Dock="Left" KeyboardNavigation.TabIndex="33"  ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=TemperatureBot, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Oxygen, surface -->
                            <DockPanel Margin="0" >
                                <Label Content="Ilt, overflade (ml/l)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbOxygenSrf" KeyboardNavigation.TabIndex="34" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=OxygenSrf, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!--  Oxygen, bottom -->
                            <DockPanel Margin="0"  >
                                <Label Content="Ilt, bund (ml/l)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbOxygenBot" KeyboardNavigation.TabIndex="35" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=OxygenBot, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Thermo Cline -->
                            <DockPanel Margin="0" >
                                <Label Content="Springlag" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_ThermoCline"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér springlag"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="36"
                                                         ItemsSource="{Binding Path=ThermoClines}" FilterFromStart="True"
                                                         SelectedItem="{Binding Path=SelectedThermoCline, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>
                                </DockPanel>
                            </DockPanel>

                            <!-- Thermo cline depth -->
                            <DockPanel Margin="0" >
                                <Label Content="Springlag, dybde (m)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbThermoClineDepth" KeyboardNavigation.TabIndex="37" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=ThermoClineDepth, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Salinity surface -->
                            <DockPanel Margin="0" >
                                <Label Content="Salinitet, overflade (PSU)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbSalinitySrf" KeyboardNavigation.TabIndex="38" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=SalinitySrf, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Salinity bottom -->
                            <DockPanel Margin="0" >
                                <Label Content="Salinitet, bund (PSU)" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <TextBox x:Name="tbSalinityBot" KeyboardNavigation.TabIndex="39" ancBe:SelectTextOnFocus.Active="True"
                                     Text="{Binding Path=SalinityBot, Converter={StaticResource ResourceKey=cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>
                        </UniformGrid>
                    </StackPanel>
                </DockPanel>


                <!-- Gear group details -->
                <DockPanel >
                    <DockPanel.Style>
                        <Style TargetType="{x:Type DockPanel}" BasedOn="{StaticResource ResourceKey=dpSection}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding Path=IsRecreationalFishery}" Value="False" />
                                        <Condition Binding="{Binding Path=HasSelectedSampleType}" Value="True" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Visible" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DockPanel.Style>
                    <!-- Header -->
                    <DockPanel DockPanel.Dock="Top">
                        <TextBlock DockPanel.Dock="left" Text="{Binding Path=SelectedSampleType.description, FallbackValue=Trawl}" >
                            <TextBlock.Style>
                                <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource txtSectionHeader}">
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <TextBlock DockPanel.Dock="left" FontSize="15" Margin="10,0,0,1" FontWeight="Normal" Text="{Binding Path=SelectedSampleType.sampleType, StringFormat='(redskabsgruppe: {0})', FallbackValue='(redskabsgruppe: A)'}" Style="{StaticResource txtSectionHeader}" />
                        <Separator Height="10" DockPanel.Dock="Top" Margin="6,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    </DockPanel>


                    <StackPanel Style="{StaticResource ResourceKey=spSection}">
                        <UniformGrid Columns="2">

                            <!--Gear type -->
                            <DockPanel Margin="0" >
                                <Label Content="Redskabstype" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <DockPanel >
                                    <TextBlock Style="{StaticResource txtRecommendedField}" Margin="2,5,-10,0" DockPanel.Dock="Right" />
                                    
                                    <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_GearType"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér redskabsgrupper"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                        <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                    </Button>

                                    <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="40" VerticalAlignment="Center" FilterFromStart="True"
                                                         ItemsSource="{Binding Path=GearTypes}" SelectionChanged="GearType_SelectionChanged"
                                                         SelectedItem="{Binding Path=SelectedGearType, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>
                                </DockPanel>
                            </DockPanel>

                            <!-- Mesh size -->
                            <DockPanel x:Name="dpMeshSize" Margin="0" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringHideOnContains}, ConverterParameter='K'}" >
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock>
                                        <TextBlock.Style>
                                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource txtLabelTextBlock}">
                                                <Setter Property="Text" Value="Maskevidde (helmasker, mm)" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=SelectedSampleType.sampleType}" Value="A">
                                                        <Setter Property="Text" Value="Posemaskevidde (helmasker, mm)" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Path=SelectedSampleType.sampleType}" Value="C">
                                                        <Setter Property="Text" Value="Posemaskevidde (helmasker, mm)" />
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Path=SelectedSampleType.sampleType}" Value="E">
                                                        <Setter Property="Text" Value="Posemaskevidde (helmasker, mm)" />
                                                    </DataTrigger>
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding="{Binding Path=SelectedSampleType.sampleType}" Value="G" />
                                                            <Condition Binding="{Binding Path=IsScientific}" Value="True" />
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter Property="Text" Value="Posemaskevidde (helmasker, mm)" />
                                                    </MultiDataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </Label>
                                <TextBox x:Name="tbMeshSize" KeyboardNavigation.TabIndex="41" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                             Text="{Binding Path=MeshSize, Converter={StaticResource ResourceKey=cStringToInt}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   >
                                    <!--<TextBox.Text>
                                            <Binding Path="MeshSize" Converter="{StaticResource ResourceKey=cStringToInt}" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" ValidatesOnDataErrors="True">
                                                <Binding.ValidationRules>
                                                    <aRules:Int32ValidationRule ErrorMessage="Angiv venligst maskevidde som et heltal" />
                                                </Binding.ValidationRules>
                                            </Binding>
                                        </TextBox.Text>-->
                                </TextBox>
                            </DockPanel>

                            <!--Selection device -->
                            <DockPanel Margin="0" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='A C E'}" >
                                <Label Content="Selektionsudstyr" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <DockPanel >
                                        <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_SelectionDevice"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér selektionsudstyr"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                            <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                        </Button>

                                        <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="42" VerticalAlignment="Center"
                                                                 
                                                         ItemsSource="{Binding Path=SelectionDevices}"  FilterFromStart="True"
                                                         SelectedItem="{Binding Path=SelectedSelectionDevice, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>
                                    </DockPanel>

                                    <Border Background="White" Opacity="0.6"
                                            Visibility="{Binding Path=IsGearTypesLoading, Converter={StaticResource ResourceKey=cBoolToVisibility}, ConverterParameter=True, FallbackValue=Collapsed}"
                                            >
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="Arbejder..." Margin="10,0,10,0"  />
                                            <ProgressBar IsIndeterminate="True" Width="40" Height="8" VerticalAlignment="Center" />
                                        </StackPanel>

                                    </Border>
                                </Grid>
                            </DockPanel>

                            <!--Selection device source -->
                            <DockPanel Margin="0">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A C E'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="False" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label Content="Kilde til selektionsudstyr" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                                <Grid>
                                    <DockPanel >
                                        <Button DockPanel.Dock="Right"
                                                Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="L_SelectionDeviceSource"
                                                Template="{StaticResource ResourceKey=imageButton}" 
                                                Style="{StaticResource ResourceKey=dropDownButton}"
                                                ToolTip="Tilføj/Redigér Selektionsudstryskilde"
                                                KeyboardNavigation.IsTabStop="False">                   
                                            <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                        </Button>

                                        <aCtrls:FilteredComboBox KeyboardNavigation.TabIndex="43" VerticalAlignment="Center"
                                                                 ItemsSource="{Binding Path=SelectionDeviceSources}"  FilterFromStart="True"
                                                                 SelectedItem="{Binding Path=SelectedSelectionDeviceSource, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                                 DisplayMemberPath="UIDisplay" OpenOnFocus="False" DropDownWidth="300"
                                                                 Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                                 MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>
                                    </DockPanel>

                                    <Border Background="White" Opacity="0.6"
                                        Visibility="{Binding Path=IsGearTypesLoading, Converter={StaticResource ResourceKey=cBoolToVisibility}, ConverterParameter=True, FallbackValue=Collapsed}">
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="Arbejder..." Margin="10,0,10,0"  />
                                            <ProgressBar IsIndeterminate="True" Width="40" Height="8" VerticalAlignment="Center" />
                                        </StackPanel>

                                    </Border>
                                </Grid>
                            </DockPanel>

                            <!-- Course track (VID) -->
                            <DockPanel Margin="0" x:Name="dpCourseTrack">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E G D C I M T'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Udsejlet distance (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox KeyboardNavigation.TabIndex="44" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=CourseTrack, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, Converter={StaticResource ResourceKey=cStringToInt}}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Garn count -->
                            <DockPanel Margin="0" x:Name="dpNumNets" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='B'}" >
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Antal garn" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox KeyboardNavigation.TabIndex="45" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=NumNets, Converter={StaticResource ResourceKey=cStringToInt}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <!--Lost garn -->
                            <DockPanel Margin="0" x:Name="dpLostNets" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='B'}" >
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Mistede garn" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox KeyboardNavigation.TabIndex="46" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=LostNets, Converter={StaticResource ResourceKey=cStringToInt}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <!--Garn height -->
                            <DockPanel Margin="0" x:Name="dpHeightNets" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='B'}" >
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Højde i garn (antal knuder)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbHeightNets" KeyboardNavigation.TabIndex="47" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=HeightNets, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!--Garn length -->
                            <DockPanel Margin="0" x:Name="dpLengthNets" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='B'}" >
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Længde af garn (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbLengthNets" KeyboardNavigation.TabIndex="48" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=LengthNets, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Trawl count (SØS) -->
                            <DockPanel Margin="0" x:Name="dpNumberTrawls">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="False" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Antal trawl (kun ved OTT)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox KeyboardNavigation.TabIndex="49" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=NumberTrawls, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, Converter={StaticResource ResourceKey=cStringToInt}}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!--Beam length -->
                            <DockPanel Margin="0" x:Name="dpLengthBeam" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='E'}">
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Længde af bom (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbLengthBeam" KeyboardNavigation.TabIndex="50" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=LengthBeam, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Bottom speed -->
                            <DockPanel Margin="0" x:Name="dpHaulSpeedBot" >
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='D C I M T'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                            <DataTrigger Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E G'}" Value="True">
                                                <Setter Property="Visibility" Value="Visible" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Trækhastighed, bund (kn)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbHaulSpeedBot" KeyboardNavigation.TabIndex="51" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=HaulSpeedBot, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <!-- Water speed (VID) -->
                            <DockPanel Margin="0" x:Name="dpWaterSpeed">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E G D C I M T'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Trækhastighed, vand (kn)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbHaulSpeedWat" KeyboardNavigation.TabIndex="52" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=HaulSpeedWat, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Haul direction (VID) -->
                            <DockPanel Margin="0" x:Name="dpHaulDirection">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E G'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Trækretning (°)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbHaulDirection" KeyboardNavigation.TabIndex="53" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=HaulDirection, Mode=TwoWay, Converter={StaticResource cStringToShort}, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Bottom speed -->
                            <DockPanel Margin="0" x:Name="dpDepthAveGear" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='A E G X'}" >
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Fiskedybde (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbDepthAveGear" KeyboardNavigation.TabIndex="54" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=DepthAveGear, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <!-- Net opening (VID) -->
                            <DockPanel Margin="0" x:Name="dpNetOpening">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Netåbning (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbNetOpening" KeyboardNavigation.TabIndex="55" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=NetOpening, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Shovel distance (VID) -->
                            <DockPanel Margin="0" x:Name="dpShovelDist">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Skovlafstand (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbShovelDist" KeyboardNavigation.TabIndex="56" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=ShovelDist, Converter={StaticResource cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Trawl count (VID) -->
                            <DockPanel Margin="0" x:Name="dpNumberTrawlsScientific">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Antal trawl" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox KeyboardNavigation.TabIndex="57" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=NumberTrawls, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, Converter={StaticResource ResourceKey=cStringToInt}}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Wire length (VID) -->
                            <DockPanel Margin="0" x:Name="dpWireLength">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E G'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Wirelængde (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox KeyboardNavigation.TabIndex="58" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=WireLength, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, Converter={StaticResource ResourceKey=cStringToInt}}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Wing spread (VID) -->
                            <DockPanel Margin="0" x:Name="dpWingSpread">
                                <DockPanel.Style>
                                    <Style TargetType="DockPanel">
                                        <Setter Property="Visibility" Value="Collapsed" />
                                        <Style.Triggers>
                                            <MultiDataTrigger>
                                                <MultiDataTrigger.Conditions>
                                                    <Condition  Binding="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringContains}, ConverterParameter='A E'}" Value="True" />
                                                    <Condition  Binding="{Binding Path=IsScientific}" Value="True" />
                                                </MultiDataTrigger.Conditions>
                                                <Setter Property="Visibility" Value="Visible" />
                                            </MultiDataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DockPanel.Style>
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Vingebredde (m)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbWingSpread" KeyboardNavigation.TabIndex="59" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=WingSpread, Converter={StaticResource cStringToDecimal}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                            <!-- Length rope flyer -->
                            <DockPanel x:Name="dpLengthRopeFlyer" Margin="0" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='M'}">
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Meter tov" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbLengthRopeFlyer" KeyboardNavigation.TabIndex="60" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=LengthRopeFlyer, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <!-- Width rope flyer -->
                            <DockPanel x:Name="dpWidthRopeFlyer" Margin="0" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='M'}">
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Tov tykkelse (mm)" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox x:Name="tbWidthRopeFlyer" KeyboardNavigation.TabIndex="61" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=WidthRopeFlyer, Mode=TwoWay, Converter={StaticResource cStringToDecimal}, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                            </DockPanel>

                            <!--Hook count -->
                            <DockPanel x:Name="dpNumberHooks" Margin="0" Visibility="{Binding Path=SelectedSampleType.sampleType, Converter={StaticResource cStringShowOnContains}, ConverterParameter='K'}">
                                <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                    <TextBlock Text="Antal kroge" Style="{StaticResource txtLabelTextBlock}" />
                                </Label>

                                <TextBox KeyboardNavigation.TabIndex="62" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=NumberHooks, Converter={StaticResource ResourceKey=cStringToInt}, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />
                            </DockPanel>

                        </UniformGrid>

                        <!-- Gear remarks -->
                        <DockPanel Margin="0" >
                            <Label DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" >
                                <TextBlock Text="Redskabsbemærkninger" Style="{StaticResource txtLabelTextBlock}" />
                            </Label>

                            <TextBox x:Name="tbGearRemark" KeyboardNavigation.TabIndex="63" ancBe:SelectTextOnFocus.Active="True" VerticalAlignment="Center"
                                     Text="{Binding Path=GearRemark, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     Style="{StaticResource ResourceKey=txtValue}"   />

                        </DockPanel>
                    </StackPanel>
                </DockPanel>

                <!-- Other details -->
                <DockPanel Style="{StaticResource ResourceKey=dpSection}">
                    <DockPanel DockPanel.Dock="Top">
                        <TextBlock DockPanel.Dock="left" Style="{StaticResource txtSectionHeader}" Text="Andet"/>
                        <Separator Height="10" DockPanel.Dock="Top" Margin="6,0,0,0" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>
                    </DockPanel>

                    <StackPanel Style="{StaticResource ResourceKey=spSection}">
                        <DockPanel Margin="0" Visibility="{Binding Path=IsRecreationalFishery, Converter={StaticResource cBoolToVisibility}, ConverterParameter=True}" >
                            <Label Content="Interviewperson" DockPanel.Dock="Left" Style="{StaticResource ResourceKey=txtHeader}" />

                            <DockPanel Width="395" HorizontalAlignment="Left" >
                                <Button DockPanel.Dock="Right"
                                        Command="{Binding Path=AddEditLookupsCommand}" CommandParameter="DFUPerson"
                                        Template="{StaticResource ResourceKey=imageButton}" 
                                        Style="{StaticResource ResourceKey=dropDownButton}"
                                        ToolTip="Tilføj/Redigér personer"
                                        KeyboardNavigation.IsTabStop="False"
                                        >
                                    <Image Margin="5" VerticalAlignment="Center" Source="pack://application:,,,/Resources/Images/Common/EditKeyValues.ico" />
                                </Button>

                                <aCtrls:FilteredComboBox FilterFromStart="True" KeyboardNavigation.TabIndex="64"
                                                         ItemsSource="{Binding Path=DFUPersons}" OpenOnFocus="False" 
                                                         SelectedItem="{Binding Path=SelectedSamplePerson, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         DisplayMemberPath="UIDisplay" DropDownWidth="{Binding Path=ActualWidth, RelativeSource={RelativeSource Mode=Self}}"
                                                         Style="{StaticResource ResourceKey=baseInputBoxStyle}"
                                                         MinimumSearchLength="1" IsEditable="True" IsTextSearchCaseSensitive="False"/>

                                
                            </DockPanel>
                        </DockPanel>
                        
                        <DockPanel Margin="0,5,0,0" >
                            <Label Content="Bemærkninger" DockPanel.Dock="Left" VerticalAlignment="Top" Style="{StaticResource ResourceKey=txtHeader}" />

                            <TextBox x:Name="tbRemark" Text="{Binding Path=Remark, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" Height="70" 
                                     Style="{StaticResource ResourceKey=txtStandard}" KeyboardNavigation.TabIndex="65"
                                     AcceptsReturn="True" ScrollViewer.VerticalScrollBarVisibility="Visible" TextWrapping="Wrap" />
                        </DockPanel>
                    </StackPanel>
                </DockPanel>
            </DockPanel>
            <!-- </Viewbox> -->

            <aCtrls:ScrollViewerStaticContent.StaticContent>
                <Grid x:Name="gridMap">

                    <map:BingMapsView DataContext="{Binding Path=MapViewModel}" HorizontalAlignment="Right" VerticalAlignment="Bottom" x:Name="map"
                                 KeyboardNavigation.IsTabStop="False" KeyboardNavigation.TabNavigation="None" Focusable="False"
                                 MaxWidth="{Binding Path=ActualWidth, ElementName=gridMap}" MaxHeight="{Binding Path=ActualHeight, ElementName=gridMap}" />

                    <!-- Zoom slider -->
                    <ancSl:ZoomSlider Grid.Row="1" Margin="4,0,0,0" Value="{Binding Source={x:Static set:Settings.Instance}, Path=ZoomLevelStation}" Width="160" HorizontalAlignment="Left" VerticalAlignment="Bottom" >
                        <ancSl:ZoomSlider.Style>
                            <Style TargetType="{x:Type ancSl:ZoomSlider}">
                                <Setter Property="Opacity" Value="0.2" />
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Trigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0.2" To="1.0" Duration="0:0:0.5"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </Trigger.EnterActions>
                                        <Trigger.ExitActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetProperty="Opacity" From="1.0" To="0.2" Duration="0:0:0.5"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </Trigger.ExitActions>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ancSl:ZoomSlider.Style>
                    </ancSl:ZoomSlider>

                </Grid>
            </aCtrls:ScrollViewerStaticContent.StaticContent>
        </aCtrls:ScrollViewerStaticContent>

        <!-- Buttons -->
        <Grid Grid.Row="2" KeyboardNavigation.TabNavigation="Local" KeyboardNavigation.TabIndex="66">
            <Border Height="50" BorderBrush="LightGray" BorderThickness="0,1,0,0" TextBlock.Foreground="{StaticResource InputHeaderForeground}" Background="{StaticResource InputHeaderBackground}" SnapsToDevicePixels="True">
                <DockPanel DockPanel.Dock="Bottom" Margin="10,5,10,5" IsEnabled="{Binding Path=IsLoading, Converter={StaticResource ResourceKey=cBoolToBoolNegation}}">

                    <DockPanel DockPanel.Dock="Left" VerticalAlignment="Center" >
                        <!-- Save button -->
                        <Button Command="{Binding Path=SaveCommand}" SnapsToDevicePixels="True" Content="Gem" DockPanel.Dock="Left"
                            KeyboardNavigation.TabIndex="1"
                            HorizontalAlignment="Right" Margin="0,0,10,0" ToolTip="Gem ændringer (ctrl+s)" ToolTipService.ShowDuration="30000"
                            Template="{StaticResource ResourceKey=standardButton}"
                            Width="120" FontSize="15" >
                            <Button.Style>
                                <Style TargetType="{x:Type Button}">
                                    <Setter Property="IsEnabled" Value="{Binding Path=HasEditingRights}" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=Sample.ChangeTracker.State}">
                                            <DataTrigger.Value>
                                                <ent:ObjectState>Unchanged</ent:ObjectState>
                                            </DataTrigger.Value>
                                            <Setter Property="IsEnabled" Value="False" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Path=CanEditOffline}" Value="False">
                                            <Setter Property="IsEnabled" Value="False" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <!-- Close button -->
                        <Button Command="{Binding Path=CloseCommand}" SnapsToDevicePixels="True" Content="Luk" DockPanel.Dock="Right"
                            KeyboardNavigation.TabIndex="2"
                            HorizontalAlignment="Right" Margin="0,0,0,0"
                            Template="{StaticResource ResourceKey=standardButton}"
                            Width="100" FontSize="15" >
                        </Button>
                        
                        <!-- New species list button -->
                        <Button Command="{Binding Path=SpeciesListCommand}"  SnapsToDevicePixels="True" DockPanel.Dock="Right"
                            HorizontalAlignment="Right" Margin="0,0,10,0" KeyboardNavigation.TabIndex="3" Width="105"
                                IsEnabled="{Binding Path=IsEdit}"
                            Template="{StaticResource ResourceKey=standardButtonBright}"  FontSize="15" >
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="pack://application:,,,/Resources/Images/Treeview/specieslist.ico" Opacity="0.7" Margin="0,1,10,0"  Width="15" />
                                    <TextBlock Text="Artsliste" FontWeight="Normal" FontSize="14" Margin="0,0,4,0" />
                                </StackPanel>
                            </Button.Content>
                        </Button>
                        
                        <Button Command="{Binding Path=ShowTripCommand}" SnapsToDevicePixels="True" DockPanel.Dock="Right"
                            HorizontalAlignment="Right" Margin="0,0,10,0"
                            Template="{StaticResource ResourceKey=standardButtonBright}"
                                KeyboardNavigation.TabIndex="3"
                            Width="90" FontSize="15" >
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <Image Opacity="0.7" Margin="0,0,8,0"  Width="19" >
                                        <Image.Style>
                                            <Style TargetType="{x:Type Image}">
                                                <Setter Property="Source" Value="pack://application:,,,/Resources/Images/Treeview/søs.png" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Path=TripType}" Value="VID">
                                                        <Setter Property="Source" Value="pack://application:,,,/Resources/Images/Treeview/vid.png" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                    <TextBlock Text="Til Tur" FontWeight="Normal" FontSize="14" Margin="0,0,4,0" />
                                </StackPanel>
                            </Button.Content>
                        </Button>

                        <Button SnapsToDevicePixels="True" DockPanel.Dock="Right" HorizontalAlignment="Right" Margin="0,0,10,0"
                                Command="{Binding Path=NewStationCommand}" Template="{StaticResource ResourceKey=standardButtonBright}"
                                Width="105" FontSize="15" IsEnabled="{Binding Path=HasEditingRights}" >
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <Image Source="pack://application:,,,/Resources/Images/Treeview/sample.png" Margin="1,1,5,0"  Width="18" />
                                    <TextBlock Text="Ny Station" FontWeight="Normal" FontSize="14" Margin="0,0,4,0" />
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </DockPanel>
          

                    <Border Margin="8,1,8,1">
                        <TextBlock  VerticalAlignment="Center" HorizontalAlignment="Center" TextWrapping="Wrap"
                                   FontSize="14" TextAlignment="Center" Foreground="{StaticResource ErrorForeground}" ToolTip="{Binding Path=GetUIErrorMessage}" Text="{Binding Path=GetUIErrorMessage}" >
                        </TextBlock>
                    </Border>

                    <!-- Message shown between buttons -->
                    <Border Margin="14,1,14,1" >
                        <Border.Style>
                            <Style TargetType="{x:Type Border}">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=HasEditingRights}" Value="False">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding Path=CanEditOffline}" Value="False">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <TextBlock  VerticalAlignment="Center" HorizontalAlignment="Center" TextWrapping="Wrap" LineHeight="15" LineStackingStrategy="BlockLineHeight"
                                   FontSize="14" TextAlignment="Center" Foreground="{StaticResource ErrorForeground}" >
                            <TextBlock.Style>
                                <Style TargetType="{x:Type TextBlock}">
                                    <Setter Property="Text" Value="Du har ikke rettigheder til at gemme eventuelle ændringer" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=CanEditOffline}" Value="False">
                                            <Setter Property="Text" Value="Ændringer til hentet offline data kan ikke gemmes" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Border>
                </DockPanel>
            </Border>
        </Grid>

        <!-- Loading message -->
        <Grid Grid.Row="1" Visibility="{Binding Path=IsLoading, Converter={StaticResource ResourceKey=cBoolToVisibility}, ConverterParameter=True, FallbackValue=Hidden}">
            <Border Background="#CCFFFFFF" HorizontalAlignment="Center" SnapsToDevicePixels="True" VerticalAlignment="Center" Margin="0,0,0,0" BorderBrush="Gray" BorderThickness="1" CornerRadius="0" >
                <DockPanel Margin="15,10,15,10" HorizontalAlignment="Center">
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding Path=LoadingMessage}"  FontSize="17"  />
                    </StackPanel>

                    <ProgressBar IsIndeterminate="True" Height="10" Margin="0,3,0,0" />
                </DockPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>
